[build]
publish = "public"
command = "npm run build"

[build.environment]
NODE_OPTIONS = "--max_old_space_size=4096"
NODE_VERSION = "20"
GATSBY_CONCURRENT_DOWNLOAD = "15"
GATSBY_CPU_COUNT = "1"

[[headers]]
  for = "/*"
  [headers.values]
    Strict-Transport-Security = '''
    max-age=63072000;
    includeSubDomains;
    preload'''

[[redirects]]
  from = "https://blog.adoptium.net/*"
  to = "https://adoptium.net/blog/:splat"
  status = 301
  force = true

# List of pages to serve (this will get long but we can slowly move them)
[[redirects]]
  from = "/"
  to = "/"
  status = 200
  force = true

[[redirects]]
  from = "/*"
  to = "https://adoptium.net/:splat"
  status = 301
  force = true